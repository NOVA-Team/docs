<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Blocks - NOVA Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/freelancer.css" rel="stylesheet">        
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a href="/" class="navbar-brand" style="margin-left: -48px;">
                <i class="fa fa-chevron-left"></i>
            </a>
            <a class="navbar-brand" href="../..">NOVA Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Mod Development <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../Getting Started/">Getting started</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Blocks</a>
                        </li>
                    
                        <li >
                            <a href="../Events/">Events</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">NOVA Development <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../NOVA Development/Development Workspace Setup/">Development Workspace Setup</a>
                        </li>
                    
                        <li >
                            <a href="../../NOVA Development/Formatting/">Formatting</a>
                        </li>
                    
                        <li >
                            <a href="../../NOVA Development/JavaDoc Style/">JavaDoc Style</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../Getting Started/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../Events/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/NOVAAPI/docs/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#blocks">Blocks</a></li>
        
            <li><a href="#components">Components</a></li>
        
            <li><a href="#special-components">Special Components</a></li>
        
            <li><a href="#special-interfaces">Special Interfaces</a></li>
        
            <li><a href="#rendering">Rendering</a></li>
        
            <li><a href="#advanced-example">Advanced Example</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1>Blocks</h1>

<h1 id="blocks">Blocks</h1>
<p>Blocks are the basic building ingredient and its existence is impertive in any voxel game. To create a block, you must register it with the BlockManager in your mod&rsquo;s preInit() stage.</p>
<pre><code class="java">blockStateless = blockManager.register(BlockStateless.class);
</code></pre>

<p>The code above registers a block class called &ldquo;BlockStateless&rdquo;. &ldquo;BlockStateless&rdquo; extends Block. The following is BlockStateless&rsquo;s code.</p>
<pre><code class="java">public class BlockStateless extends Block implements Syncable {

    public BlockStateless() {
        add(new StaticBlockRenderer(this)).setTexture(NovaBlock.steelTexture);

        add(new Collider());

        add(new ItemRenderer(this));

        add(new Category(&quot;buildingBlocks&quot;));
        events.on(RightClickEvent.class).bind(this::onRightClick);
    }

    public void onRightClick(RightClickEvent evt) {
        System.out.println(&quot;Sending Packet: 1234&quot;);
        NovaBlock.networkManager.sync(this);
    }

    @Override
    public String getID() {
        return &quot;simple&quot;;
    }
}
</code></pre>

<p>See <a href="https://github.com/NOVA-Team/NOVA-Example/blob/master/block/src/main/java/nova/sample/block/NovaBlock.java">here</a> for a live example.</p>
<h2 id="components">Components</h2>
<p>There are some components you will probably always want to implement in your blocks, none of them are required and can be left out or replaced with your own versions of it.</p>
<h3 id="collider">Collider</h3>
<p>This component determines a few properties of your block, namely if it is a cube, opaque, what it&rsquo;s bounding and selection boxes are. It also has an eventbus for collision events</p>
<h3 id="category">Category</h3>
<p>This is the category(creative tab in minecraft) where this block belongs to</p>
<h3 id="itemrenderer">ItemRenderer</h3>
<p>This handles the rendering of the block in your inventory and hand</p>
<h3 id="blockrenderer">Blockrenderer</h3>
<p>In this case the StaticBlockRenderer is used but there a few others you can use as well, this is responsible for rendering the block in the world. You should bind a function to get provide textures as shown in the example above or pass it a function to if different sides use different textures (shown in the advanced example below)</p>
<p>The StaticBlockRenderer only renders when the block receives an update.</p>
<h2 id="special-components">Special Components</h2>
<p>NOVA is ment to be modular and allows you to make your own components to add but it&rsquo;s also &ldquo;Batteries included&rdquo;. Here are some interfaces that NOVA provides you might find usefull</p>
<h3 id="orientation">Orientation</h3>
<p>Orientation allows your block to be rotated and face towards a specific side, this way it can have a front, back and sides.</p>
<p>If you just add this component to the components not much will heapen. The best thing to do is save this in a variable and annotate it with the @Sync and @Store annotations. The @Sync will sync between client and server (for that you should also have the block sync when it is placed down, see networking on how to do that)
The @Store will save and load the orientation so the data is not lost when the world is reloaded</p>
<h2 id="special-interfaces">Special Interfaces</h2>
<h3 id="syncable">Syncable</h3>
<p>You may have noticed that BlockStateless implements Syncable. This interface allows the block to handle packets easily. By implementing Syncable, the block is capable of reading and writing packets between server and client. You can override the default methods <code>read(Packet packet)</code> and <code>write(Packet packet)</code> as shown in the example to read and write custom packets. Any variable annotated by <code>@Sync</code> will be synced between server and client. </p>
<h3 id="stateful">Stateful</h3>
<p>By default, blocks will be stateless. This means that blocks will be unable to retain their variables and state. Stateless blocks are more efficient and are appropriate for blocks that are abundant and have no internal logic (e.g: Decoration blocks, ores and resources). However, more complex blocks will need to implement <code>Stateful</code> interface, which allows it to store its state in the world.</p>
<h3 id="storable">Storable</h3>
<p>Storable allows a block to store its variables when a game saves. By implementing <code>Storable</code>, the block will be able to override <code>save</code> and <code>load</code> methods. Any variable that is annotated by <code>@Store</code> will have their values be automatically stored. However, not all variables can be properly stored.</p>
<h2 id="rendering">Rendering</h2>
<p>For rendering you can use the StaticBlockRenderer shown above, make your own or use these</p>
<h3 id="rotatedrenderer">RotatedRenderer</h3>
<p>This is for use in combination with the Orientation component, it rotates the rendering of the block to match the rotation stored in the Orientation object. If you use this you should also use a function to give multiple textures as there is no point in rotated rendering if the block has the same texture on all sides</p>
<h2 id="advanced-example">Advanced Example</h2>
<p>This is an example of a block that combines most of the things listed above, it has a collider, is rotatable (and rendered as such) and print it&rsquo;s orientation to the console when rightclicked</p>
<pre><code class="java">public class BasicDuster extends Block implements Stateful, Storable, Syncable {
    @Sync
    @Store
    private Component orientation = new Orientation(this).hookBasedOnHitSide();

    public BasicDuster() {
        add(new Collider());
        add(orientation);
        add(new RotatedRenderer(this).setTexture(this::getTexture));
        add(new ItemRenderer(this));
        add(new Category(&quot;buildingBlocks&quot;));
        events.on(RightClickEvent.class).bind(this::click);
        orientation.events.on(Block.PlaceEvent.class).bind((e) -&gt; YourMod.networkManager.sync(this));
    }

    public Optional&lt;Texture&gt; getTexture(Direction dir) {
        Optional&lt;Texture&gt; texture = Optional.empty();
        switch (dir) {
            case NORTH: texture = Optional.of(Textures.dusterFront); break;
            case EAST:
            case WEST: texture = Optional.of(Textures.dusterSides); break;
            case SOUTH: texture = Optional.of(Textures.dusterBack); break;
            case UP: texture = Optional.of(Textures.dusterTop); break;
            case DOWN: texture = Optional.of(Textures.dusterBottom); break;
        }
        return texture;
    }

    @Override
    public void read(Packet packet) {
        Syncable.super.read(packet);
        world().markStaticRender(position());
    }

    public void click(RightClickEvent event) {
        if (Game.network().isServer()) {
            System.out.println(get(Orientation.class).orientation());
        }
    }

    @Override
    public String getID() {
        return &quot;basicDuster&quot;;
    }
}
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>